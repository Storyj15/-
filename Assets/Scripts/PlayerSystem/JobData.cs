using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public abstract class JobData
{
    //°òÂ¦¼Æ­È
    public string JobName;
    public string SkillName;
    public string DefenseText;
    public string ATKText;
    public string SkillText;
    public string Upgrage1Text;
    public string Upgrage2Text;
    public string Upgrage3Text;
    public int HP = 10; 
    public int MoveValue = 1; 
    public int ATKValue; 
    public int ATKZone;
    public int[] BuffValue;
    //¯S®í¼Æ­È
    public List<int[]> SpecialNormalZone;
    public bool isNormalATKZone = true;
    public int SkillValue;
    public List<int[]> SkillZones;
    public abstract void Setting();     //Â¾·~¼Æ­È³]©w
    public abstract void Upgrade();    //¥dµP¤É¯Å³]©w
    public abstract void Skill();     //§Þ¯à®ÄªG
    public abstract void SpecialProcess();    //¯S®í³B²z
}
public class Warrior : JobData
{
    public override void Setting()
    {
        isNormalATKZone = true;
        JobName = "«i®ð";
        SkillName = "¸t¼C";
        DefenseText = "Å@¥Ò­È+1";
        ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`2";
        SkillText = "¥¿«e¤è©Ò¦³¼Ä¤H\n¶Ë®`2";
        Upgrage1Text = "§ï¬°Å@¥Ò­È+2";
        Upgrage2Text = "¶Ë®`+2";
        Upgrage3Text = "¸t¼C¶Ë®`+2";
        ATKValue = 2;
        ATKZone = 4;
        BuffValue = new int[3] { 0, 0, 0 }; //(Defense,ATKValue,SkillValue)
        Upgrade();
    }
    public override void Upgrade()
    {
        if (GameManager.gameManager_instance.PlayerUpgrade[0] == 1)
        {
            BuffValue[0] = 1;
            DefenseText = "Å@¥Ò­È+2";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[1] == 1)
        {
            BuffValue[1] = 2;
            ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`4";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[2] == 1)
        {
            BuffValue[2] = 2;
            SkillText = "ª±®a¥¿«e¤è©Ò¦³¼Ä¤H\n¶Ë®`4";
        }
    }
    public override void Skill()
    {
        SkillValue = 2 + BuffValue[2];
        var SkillZone = new List<int[]>();
        for (int i = 0; i < 8; i++)
        {
            SkillZone.Add(new int[2] {PlayerUIManager.GetInstance().PlayerData.PlayerLocation[0],i});
        }
        for (int j = 0; j < PlayerUIManager.GetInstance().PlayerData.PlayerLocation[1] + 1; j++)
        {
            SkillZone.RemoveAt(0);
        }
        SkillZones = SkillZone;
    }
    public override void SpecialProcess()
    {
        
    }
}
public class Magician : JobData
{
    public override void Setting()
    {
        isNormalATKZone = true;
        JobName = "¤Û·Q";
        DefenseText = "Å@¥Ò­È+1";
        ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`2";
        SkillName = "Å]ªkÃz¯}";
        SkillText = "ÀH¾÷3®æ\n5ÂI¶Ë®`";
        Upgrage1Text = "§ï¬°Å@¥Ò­È+3\n¦^¦Xµ²§ô®ÉÂk0";
        Upgrage2Text = "§ðÀ»¶ZÂ÷+1";
        Upgrage3Text = "©R¤¤®æ+2";
        //HP = 10;
        //MoveValue = 1;
        ATKValue = 2;
        ATKZone = 4;
        BuffValue = new int[3] { 0, 0, 0 }; //(Defense,ATKValue,SkillValue)
        Upgrade();
    }
    public override void Upgrade()
    {
        if (GameManager.gameManager_instance.PlayerUpgrade[0] == 1)
        {
            BuffValue[0] = 2;
            DefenseText = "Å@¥Ò­È+3\n¦^¦Xµ²§ô®ÉÂk0";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[1] == 1)
        {
            ATKZone += 1;
            ATKText = "§ðÀ»¶ZÂ÷5\n¶Ë®`2";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[2] == 1)
        {
            BuffValue[2] = 2;
            SkillText = "ÀH¾÷5®æ\n5ÂI¶Ë®`";
        }
    }
    public override void Skill()
    {
        SkillValue = 5;
        var SkillZone = new List<int[]>();
        var TargetZone = new List<int[]>();
        for (int a = 0; a < 3; a++)
        {
            for (int b = 0; b < 4; b++)
            {
                TargetZone.Add(new int[] {a,b +4});
            }
        }
        for (int i = 0; i < (3 + BuffValue[2]); i++)
        {
            var RandomInt = Random.Range(0, TargetZone.Count);
            SkillZone.Add(TargetZone[RandomInt]);
            TargetZone.Remove(TargetZone[RandomInt]);
        }
        SkillZones = SkillZone;
    }
    public override void SpecialProcess()
    {
        if (GameManager.gameManager_instance.PlayerUpgrade[0] == 1)
        {
            if (DuelBattleManager.duelStateMode == NewGameState.NewDuelStateMode.End)
            {
                PlayerUIManager.GetInstance().PlayerData.Defense = 0;
            }
        }
    }
}
public class Archer : JobData
{
    public override void Setting()
    {
        isNormalATKZone = true;
        JobName = "³¥¤ß";
        DefenseText = "Å@¥Ò­È+1";
        ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`2";
        SkillName = "½b«B";
        SkillText = "ÀH¾÷2®æ\n4ÂI¶Ë®`";
        Upgrage1Text = "§ï¬°Å@¥Ò­È+2";
        Upgrage2Text = "§ðÀ»¶ZÂ÷+2";
        Upgrage3Text = "©R¤¤®æ+2";
        //HP = 10;
        //MoveValue = 1;
        ATKValue = 2;
        ATKZone = 4;
        BuffValue = new int[3] { 0, 0, 0 }; //(Defense,ATKValue,SkillValue)
        Upgrade();
    }
    public override void Upgrade()
    {
        if (GameManager.gameManager_instance.PlayerUpgrade[0] == 1)
        {
            BuffValue[0] = 1;
            DefenseText = "Å@¥Ò­È+2";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[1] == 1)
        {
            ATKZone += 2;
            ATKText = "§ðÀ»¶ZÂ÷6\n¶Ë®`2";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[2] == 1)
        {
            BuffValue[2] = 2;
            SkillText = "ÀH¾÷4®æ\n4ÂI¶Ë®`";
        }
    }
    public override void Skill()
    {
        SkillValue = 4;
        var SkillZone = new List<int[]>();
        var TargetZone = new List<int[]>();
        for (int a = 0; a < 3; a++)
        {
            for (int b = 0; b < 4; b++)
            {
                TargetZone.Add(new int[] { a, b + 4 });
            }
        }
        for (int i = 0; i < (2 + BuffValue[2]); i++)
        {
            var RandomInt = Random.Range(0, TargetZone.Count);
            SkillZone.Add(TargetZone[RandomInt]);
            TargetZone.Remove(TargetZone[RandomInt]);
        }
        SkillZones = SkillZone;
    }
    public override void SpecialProcess()
    {
       
    }
}
public class Gambler : JobData
{
    public override void Setting()
    {
        isNormalATKZone = true;
        JobName = "©R¹B";
        DefenseText = "Å@¥Ò­È+1";
        ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`2";
        SkillName = "©R©wªº¥¿¦ì¸m";
        SkillText = "«e¤è2®æ¶Ë®`10\n®³¨ì«á§ð¶Ë®`«h0";
        Upgrage1Text = "§ï¬°Å@¥Ò­È\n¼W¥[0~3";
        Upgrage2Text = "¶Ë®`+1";
        Upgrage3Text = "¶Ë®`+10\n®³¨ì«á§ð¶Ë®`«h0";
        //HP = 10;
        //MoveValue = 1;
        ATKValue = 2;
        ATKZone = 4;
        BuffValue = new int[3] { 0, 0, 0 }; //(Defense,ATKValue,SkillValue)
        Upgrade();
    }
    public override void Upgrade()
    {
        if (GameManager.gameManager_instance.PlayerUpgrade[0] == 1)
        {
            DefenseText = "Å@¥Ò­È+0~3";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[1] == 1)
        {
            BuffValue[1] = 1;
            ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`3";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[2] == 1)
        {
            BuffValue[2] = 10;
            SkillText = "«e¤è2®æ¶Ë®`20\n®³¨ì«á§ð¶Ë®`«h0";
        }
    }
    public override void Skill()
    {
        var SkillZone = new List<int[]>();
        for (int i = 0; i < 2; i++)
        {
            SkillZone.Add(new int[2] { PlayerUIManager.GetInstance().PlayerData.PlayerLocation[0], PlayerUIManager.GetInstance().PlayerData.PlayerLocation[1] + (i + 1) });
        }
        SkillZones = SkillZone;
    }
    public override void SpecialProcess()
    {
        if (DuelBattleManager.duelStateMode == NewGameState.NewDuelStateMode.AttackResult && !PlayerUIManager.GetInstance().isFirstATK)
        {
            SkillValue = 0;
        }
        else if (DuelBattleManager.duelStateMode == NewGameState.NewDuelStateMode.AttackResult && PlayerUIManager.GetInstance().isFirstATK)
        {
            SkillValue = 10 + BuffValue[2];
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[0] == 1)
        {
            BuffValue[0] = Random.Range(-1, 3);
        }
    }
}
public class Foodie : JobData
{
    public override void Setting()
    {
        isNormalATKZone = true;
        JobName = "°§¾j";
        DefenseText = "Å@¥Ò­È+1";
        ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`2";
        SkillName = "¼É­¹";
        SkillText = "¥Í©R­È+1";
        Upgrage1Text = "§ï¬°Å@¥Ò­È+2";
        Upgrage2Text = "¶Ë®`+1";
        Upgrage3Text = "§ï¬°¥Í©R­È+2";
        //HP = 10;
        //MoveValue = 1;
        ATKValue = 2;
        ATKZone = 4;
        BuffValue = new int[3] { 0, 0, 0 }; //(Defense,ATKValue,SkillValue)
        Upgrade();
    }
    public override void Upgrade()
    {
        if (GameManager.gameManager_instance.PlayerUpgrade[0] == 1)
        {
            BuffValue[0] = 1;
            DefenseText = "Å@¥Ò­È+2";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[1] == 1)
        {
            BuffValue[1] = 1;
            ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`3";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[2] == 1)
        {
            BuffValue[2] = 1;
            SkillText = "¥Í©R­È+2";
        }
    }
    public override void Skill()
    {
        CoordinatesEffectAni.isBuffSkill = true;
        SkillValue = 1 + BuffValue[2];
        SkillZones = new List<int[]> { PlayerUIManager.GetInstance().PlayerData.PlayerLocation };
        PlayerUIManager.GetInstance().PlayerData.HP += (SkillValue * PlayerUIManager.GetInstance().PlayerData.PlayerAction[2]);
    }
    public override void SpecialProcess()
    {

    }
}
public class Musician : JobData
{
    public override void Setting()
    {
        isNormalATKZone = true;
        JobName = "±Û«ß";
        DefenseText = "Å@¥Ò­È+1";
        ATKText = "§ðÀ»¶ZÂ÷4\n¶Ë®`2";
        SkillName = "ÅÜ«µ";
        SkillText = "³o³õ¨M°«\n§ðÀ»«ü¥O¶Ë®`+1";
        Upgrage1Text = "§ï¬°Å@¥Ò­È+2";
        Upgrage2Text = "§ðÀ»½d³òÅÜ¥þ³õ\n¶Ë®`1";
        Upgrage3Text = "§ï¬°³o³õ¨M°«\n§ðÀ»«ü¥O¶Ë®`+2";
        //HP = 10;
        //MoveValue = 1;
        ATKValue = 2;
        ATKZone = 4;
        BuffValue = new int[3] { 0, 0, 0 }; //(Defense,ATKValue,SkillValue)
        Upgrade();
    }
    public override void Upgrade()
    {
        if (GameManager.gameManager_instance.PlayerUpgrade[0] == 1)
        {
            BuffValue[0] = 1;
            DefenseText = "Å@¥Ò­È+2";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[1] == 1)
        {
            isNormalATKZone = false;
            SpecialNormalZone = new List<int[]>();
            for (int i = 0; i < 3; i++)
            {
                for (int j = 0; j < 4; j++)
                {
                    SpecialNormalZone.Add(new int[] { i, (j + 4) });
                }
            }
            BuffValue[1] = -1;
            ATKText = "§ðÀ»¥þ³õ\n¶Ë®`1";
        }
        if (GameManager.gameManager_instance.PlayerUpgrade[2] == 1)
        {
            BuffValue[2] = 1;
            SkillText = "³o³õ¨M°«\n§ðÀ»«ü¥O¶Ë®`+2";
        }
    }
    public override void Skill()
    {
        CoordinatesEffectAni.isBuffSkill = true;
        SkillValue = 1 + BuffValue[2];
        SkillZones = new List<int[]> { PlayerUIManager.GetInstance().PlayerData.PlayerLocation };
        PlayerUIManager.GetInstance().PlayerData.ATKValue += (SkillValue * PlayerUIManager.GetInstance().PlayerData.PlayerAction[2]);
    }
    public override void SpecialProcess()
    {
        
    }
}